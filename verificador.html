<!DOCTYPE html>
<html lang="es">
<head>
    <!-- ... (head sin cambios) ... -->
</head>
<body>
    <!-- ... (body sin cambios hasta el script) ... -->
    <script>
        // ... (Tu URL de Gist de revocados aquí)

        // ... (La estructura del script hasta onScanSuccess no cambia)

        async function onScanSuccess(decodedText, decodedResult) {
            // ... (Lógica de detener escáner y try/catch sin cambios)

            try {
                const data = JSON.parse(decodedText);
                // ... (Lógica de ID y fecha de expiración sin cambios)
                
                // --- Verificación de expiración (sin cambios) ---
                if (data.exp && data.exp !== 0 && new Date().getTime() > data.exp) {
                    // ... (código de permiso expirado, sin cambios)
                    return; 
                }

                // ... (Lógica de lista de revocados sin cambios)

                if (revokedIds.includes(idFromQr)) {
                    // ... (código de acceso revocado, sin cambios)
                } else if (data.e === "A") {
                    const validezInfo = data.exp && data.exp !== 0
                        ? `Válido hasta: ${new Date(data.exp).toLocaleDateString('es-ES')}`
                        : 'Permiso permanente';
                    
                    // --- NUEVA LÍNEA PARA EL PARQUEADERO ---
                    const parqueaderoInfo = data.park ? `<p><strong>Parqueadero Asignado:</strong> ${data.park}</p>` : '';

                    resultContainer.className = 'result-success';
                    resultContainer.innerHTML = `
                        <h2>✅ ACCESO PERMITIDO</h2>
                        <p><strong>Nombre:</strong> ${data.n}</p>
                        <p><strong>Identificación:</strong> ${idFromQr}</p>
                        <p><strong>Validez:</strong> ${validezInfo}</p>
                        ${parqueaderoInfo} <!-- Se inserta la información del parqueadero aquí -->
                        <hr>
                        <p><strong>Vehículo:</strong> ${data.v.t}</p>
                        <p><strong>Modelo:</strong> ${data.v.m}</p>
                        <p><strong>Placa:</strong> ${data.v.p}</p>
                        <hr>
                        <p id="audit-info">Generado el: ${data.f || 'N/A'} por <strong>${data.c || 'Desconocido'}</strong></p>
                    `;
                } else {
                    throw new Error("Estado de acceso no válido.");
                }

            } catch (e) {
                // ... (código de manejo de errores, sin cambios)
            }
        }

        // ... (El resto del script no cambia)
    </script>
</body>
</html>
